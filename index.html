<!DOCTYPE html>

<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Will You Be My Valentine? ‚ù§Ô∏è</title>

<style>
* {
  box-sizing: border-box;
  -webkit-tap-highlight-color: transparent;
}

body {
  margin: 0;
  font-family: 'Comic Sans MS', cursive, sans-serif;
  height: 100dvh;
  display: flex;
  justify-content: center;
  align-items: center;
  background: linear-gradient(135deg, #ff9a9e, #fad0c4);
  overflow: hidden;
  touch-action: manipulation;
}

.container {
  text-align: center;
  background: rgba(255, 255, 255, 0.95);
  padding: 28px;
  border-radius: 20px;
  box-shadow: 0 8px 24px rgba(0, 0, 0, 0.15);
  position: relative;
  width: min(90vw, 340px);
}

h1 {
  margin-bottom: 18px;
  color: #e63946;
  font-size: clamp(18px, 4vw, 22px);
  line-height: 1.3;
}

.small-message {
  font-size: 14px;
  line-height: 1.4;
}

.buttons {
  position: relative;
  height: 120px;
}

button {
  padding: 12px 20px;
  font-size: 16px;
  border: none;
  border-radius: 30px;
  cursor: pointer;
  position: absolute;
  transition: transform 0.15s ease;
  will-change: transform;
}

button:active {
  transform: scale(0.95);
}

#yesBtn {
  background: #ff4d6d;
  color: white;
  left: 20%;
  top: 40px;
}

#noBtn {
  background: #adb5bd;
  color: white;
  right: 20%;
  top: 40px;
}

.hearts,
.bg-heart {
  position: fixed;
  pointer-events: none;
  will-change: transform, opacity;
}

.hearts {
  font-size: 22px;
  animation: floatUp 2s linear forwards;
}

@keyframes floatUp {
  from { opacity: 1; transform: translateY(0); }
  to { opacity: 0; transform: translateY(-150px); }
}

.bg-heart {
  opacity: 0.6;
  animation: bgFloat linear forwards;
}

@keyframes bgFloat {
  from { transform: translateY(100dvh); opacity: 0.7; }
  to { transform: translateY(-100dvh); opacity: 0; }
}
</style>

</head>

<body>

<div class="container">
  <h1 id="question">Will you be my Valentine? üíñ</h1>

  <div class="buttons">
    <button id="yesBtn">Yes üòç</button>
    <button id="noBtn">No üôà</button>
  </div>
</div>

<!-- AUDIO -->

<audio id="bgMusic" preload="auto" loop playsinline>
  <source src="./pachadaname.mp3" type="audio/mpeg">
</audio>

<script>
const noBtn = document.getElementById("noBtn");
const yesBtn = document.getElementById("yesBtn");
const question = document.getElementById("question");
const music = document.getElementById("bgMusic");

/* ---------------- BULLETPROOF AUDIO FIX ---------------- */

music.volume = 1;
music.muted = false;

function playMusicSafe() {
  music.currentTime = 0;

  const playPromise = music.play();

  if (playPromise !== undefined) {
    playPromise
      .then(() => console.log("‚úÖ Audio playing"))
      .catch(err => {
        console.log("‚ö†Ô∏è Retry audio...", err);
        setTimeout(() => {
          music.play().catch(e =>
            console.log("‚ùå Audio failed:", e)
          );
        }, 300);
      });
  }
}

function unlockAudio() {
  music.play()
    .then(() => {
      music.pause();
      music.currentTime = 0;
      console.log("üîì Audio unlocked");
    })
    .catch(() => {});

  document.removeEventListener("touchstart", unlockAudio);
  document.removeEventListener("click", unlockAudio);
}

document.addEventListener("touchstart", unlockAudio, { once: true });
document.addEventListener("click", unlockAudio, { once: true });

/* ---------------- NO BUTTON ---------------- */

const noMessages = [
  "Sorry you can't say no",
  "Try again",
  "The Yes button is right there!",
  "Nope pick right option",
  "That's not an option, silly! üíñ",
  "Nice try, but Yes is calling!",
  "The Yes button is much cuter!",
  "Yes is the right answer! ‚ú®",
  "Nope! Try the other button üòä",
  "Yes is waiting for you",
  "That button doesn't work here",
  "Yes, you won't regret it! üíù"
];

let messageIndex = 0;
let noScale = 1;

function moveNoButton() {
  const container = document.querySelector(".container");
  const rect = container.getBoundingClientRect();

  const x = Math.random() * (rect.width - noBtn.offsetWidth);
  const y = Math.random() * (rect.height - noBtn.offsetHeight);

  noBtn.style.left = x + "px";
  noBtn.style.top = y + "px";

  noBtn.textContent = noMessages[messageIndex];
  messageIndex = (messageIndex + 1) % noMessages.length;

  noScale *= 0.9;
  if (noScale < 0.3) noScale = 0.3;
  noBtn.style.transform = "scale(" + noScale + ")";
}

noBtn.addEventListener("pointerenter", moveNoButton);
noBtn.addEventListener("touchstart", moveNoButton, { passive: true });
noBtn.addEventListener("click", moveNoButton);

/* ---------------- TYPEWRITER ---------------- */

function typeWriter(element, text, speed = 25) {
  element.innerHTML = "";
  let i = 0;

  function typing() {
    if (i < text.length) {
      const char = text.charAt(i);
      element.innerHTML += char === "\n" ? "<br>" : char;
      element.scrollTop = element.scrollHeight;
      i++;
      setTimeout(typing, speed);
    }
  }

  typing();
}

/* ---------------- YES BUTTON ---------------- */

function showMessage() {
  question.classList.add("small-message");

  const messageText = `Happy Valentine‚Äôs Day, bujji ‚ù§Ô∏è Being with you is my happiest place ‚Äî I love that I can be completely myself with you, and every time I see you, I still get that soft aww feeling ü•∫üíñ...

And yes‚Ä¶ I‚Äôm right here loving and supporting you always üíï.

‚Äî Yours always, Pandi üíå`;

  typeWriter(question, messageText, 25);

  noBtn.style.display = "none";
  yesBtn.style.display = "none";

  playMusicSafe();

  createHearts();
  createCelebrationEmojis();
}

yesBtn.addEventListener("click", showMessage);

/* ---------------- HEART ANIMATIONS ---------------- */

function createHearts() {
  for (let i = 0; i < 15; i++) {
    const heart = document.createElement("div");
    heart.className = "hearts";
    heart.textContent = "üíñ";
    heart.style.left = Math.random() * window.innerWidth + "px";
    heart.style.top = window.innerHeight - 50 + "px";
    document.body.appendChild(heart);
    setTimeout(() => heart.remove(), 2000);
  }
}

const bgHearts = ["üíó", "üíñ", "üíò", "üíù", "üíï"];

function spawnBackgroundHeart() {
  const heart = document.createElement("div");
  heart.className = "bg-heart";
  heart.textContent = bgHearts[Math.floor(Math.random() * bgHearts.length)];
  heart.style.left = Math.random() * window.innerWidth + "px";
  heart.style.animationDuration = 4 + Math.random() * 4 + "s";
  heart.style.fontSize = 16 + Math.random() * 20 + "px";

  document.body.appendChild(heart);
  setTimeout(() => heart.remove(), 8000);
}

const celebrationEmojis = ["üíñ", "üíò", "üíù", "üíï", "ü•∞", "‚ú®", "üå∏"];

function createCelebrationEmojis() {
  const interval = setInterval(() => {
    const emoji = document.createElement("div");
    emoji.className = "bg-heart";
    emoji.textContent =
      celebrationEmojis[Math.floor(Math.random() * celebrationEmojis.length)];
    emoji.style.left = Math.random() * window.innerWidth + "px";
    emoji.style.animationDuration = 3 + Math.random() * 3 + "s";
    emoji.style.fontSize = 20 + Math.random() * 24 + "px";

    document.body.appendChild(emoji);
    setTimeout(() => emoji.remove(), 6000);
  }, 150);

  setTimeout(() => clearInterval(interval), 8000);
}

setInterval(spawnBackgroundHeart, 700);
</script>

</body>
</html>
